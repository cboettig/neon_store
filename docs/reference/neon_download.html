<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download NEON data products into a local store — neon_download • neonstore</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Download NEON data products into a local store — neon_download" />
<meta property="og:description" content="Download NEON data products into a local store" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neonstore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download NEON data products into a local store</h1>
    
    <div class="hidden name"><code>neon_download.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Download NEON data products into a local store</p>
    </div>

    <pre class="usage"><span class='fu'>neon_download</span><span class='op'>(</span>
  <span class='va'>product</span>,
  table <span class='op'>=</span> <span class='cn'>NA</span>,
  site <span class='op'>=</span> <span class='cn'>NA</span>,
  start_date <span class='op'>=</span> <span class='cn'>NA</span>,
  end_date <span class='op'>=</span> <span class='cn'>NA</span>,
  type <span class='op'>=</span> <span class='st'>"basic"</span>,
  release <span class='op'>=</span> <span class='cn'>NA</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verify <span class='op'>=</span> <span class='cn'>TRUE</span>,
  unique <span class='op'>=</span> <span class='cn'>TRUE</span>,
  dir <span class='op'>=</span> <span class='fu'><a href='neon_dir.html'>neon_dir</a></span><span class='op'>(</span><span class='op'>)</span>,
  get_zip <span class='op'>=</span> <span class='cn'>FALSE</span>,
  unzip <span class='op'>=</span> <span class='cn'>FALSE</span>,
  api <span class='op'>=</span> <span class='st'>"https://data.neonscience.org/api/v0"</span>,
  .token <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.getenv.html'>Sys.getenv</a></span><span class='op'>(</span><span class='st'>"NEON_TOKEN"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>product</th>
      <td><p>A NEON <code>productCode</code> or list of product codes, see examples.</p></td>
    </tr>
    <tr>
      <th>table</th>
      <td><p>Include only files matching this table name (or regex pattern).
(optional).</p></td>
    </tr>
    <tr>
      <th>site</th>
      <td><p>4-letter site code(s) to filter on. Leave as <code>NA</code> to search all.</p></td>
    </tr>
    <tr>
      <th>start_date</th>
      <td><p>Download only files as recent as (<code>YYYY-MM-DD</code>). Leave
as <code>NA</code> to download up to the most recent available data.</p></td>
    </tr>
    <tr>
      <th>end_date</th>
      <td><p>Download only files up to end_date (<code>YYYY-MM-DD</code>). Leave as
<code>NA</code> to download all prior data.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Should we prefer the basic or expanded version of this product?
Note that not all products have expanded formats.</p></td>
    </tr>
    <tr>
      <th>release</th>
      <td><p>Select only data files associated with a particular release tag,
see <a href='https://www.neonscience.org/data-samples/data-management/data-revisions-releases'>https://www.neonscience.org/data-samples/data-management/data-revisions-releases</a>,
e.g. "RELEASE-2021".  Releases are associated with a specific DOI and the promise that
files associated with a particular release will not change.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Should download progress be displayed?</p></td>
    </tr>
    <tr>
      <th>verify</th>
      <td><p>Should downloaded files be compared against the MD5 hash
reported by the NEON API to verify integrity? (default <code>TRUE</code>)</p></td>
    </tr>
    <tr>
      <th>unique</th>
      <td><p>Should we skip downloads of files we already have?  Note: file
comparisons are based on file hash, which will omit files that have identical
content but different names.</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>Location where files should be downloaded. By default will
use the appropriate applications directory for your system
(see <code><a href='https://rdrr.io/r/tools/userdir.html'>tools::R_user_dir()</a></code>).  This default also be configured by
setting the environmental variable <code>NEONSTORE_HOME</code>, see <a href='https://rdrr.io/r/base/Sys.setenv.html'>Sys.setenv</a> or
<a href='https://rdrr.io/r/base/Startup.html'>Renviron</a>.</p></td>
    </tr>
    <tr>
      <th>get_zip</th>
      <td><p>should we attempt to download .zip archive versions of files?
default <code>FALSE</code>, as zip archives are being deprecated from NEON API starting
in early 2021.</p></td>
    </tr>
    <tr>
      <th>unzip</th>
      <td><p>should we extract .zip files? (default <code>TRUE</code>). Note: .zip
files are preserved in the store to avoid repeated downloads. Use of .zip
files in NEON API is now deprecated in favor of requesting individual files.</p></td>
    </tr>
    <tr>
      <th>api</th>
      <td><p>the URL to the NEON API, leave as default.</p></td>
    </tr>
    <tr>
      <th>.token</th>
      <td><p>an authentication token from NEON. A token is not
required but will allow access to a higher number of requests before
rate limiting applies, see
<a href='https://data.neonscience.org/data-api/rate-limiting/#api-tokens'>https://data.neonscience.org/data-api/rate-limiting/#api-tokens</a>.
Note that once files are downloaded once, <code>neonstore</code> provides persistent
access to them without further interaction required with the API.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Each NEON data product consists of a collection of
objects (e.g. tables), which are in turn broken into individual files by
site and sampling month.  Additionally, many NEON products have been
expanded, including some additional columns. Consequently, users must
specify if they want the "basic" or "expanded" version of this data.</p>
<p>In the products table (see <a href='neon_products.html'>neon_products</a>), the <code>productHasExpanded</code>
column indicates if the data
product has expanded, and the columns <code>productHasBasicDescription</code> and
<code>productHasExpandedDescription</code> provide a detailed explanation of the
differences between the <code>"expanded"</code> and <code>"basic"</code> versions of that
particular product.</p>
<p>The API allows users to request component files directly.
By default, <code>neon-download()</code> will download all available
extensions.  Users can request only products of a certain format
(e.g. <code>.csv</code> or <code>.h5</code>) by altering the <code>file_regex</code> argument
(see examples).</p>
<p>Prior to 2021, the API provided
access to a <code>.zip</code> file containing all the component objects
(e.g. tables) for that product at that site and sampling month.</p>
<p><code>neon_download()</code> will avoid downloading metadata files which are bitwise
identical to other files in the same download request, as indicated by the
crc32 hash reported by the API.  These typically include metadata that are
shared across the product as a whole, but are for some reason included in
each sampling month for each site -- potentially thousands of duplicates.
These duplicates are also packaged within the <code>.zip</code> downloads where it
is not possible to exclude them from the download.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
 
 <span class='co'>## Omit dir=tempfile() to use persistent storage</span>
 <span class='fu'>neon_download</span><span class='op'>(</span><span class='st'>"DP1.10003.001"</span>, 
               start_date <span class='op'>=</span> <span class='st'>"2018-01-01"</span>, 
               end_date <span class='op'>=</span> <span class='st'>"2019-01-01"</span>,
               site <span class='op'>=</span> <span class='st'>"YELL"</span>,
               dir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>  comparing hashes against local file index...</span></div><div class='output co'>#&gt; <span class='message'>  updating release manifest...</span></div><div class='input'>               
 <span class='co'>## Advanced use: filter for a particular table in the product</span>
 <span class='fu'>neon_download</span><span class='op'>(</span>product <span class='op'>=</span> <span class='st'>"DP1.10003.001"</span>,
               start_date <span class='op'>=</span> <span class='st'>"2018-01-01"</span>,
               end_date <span class='op'>=</span> <span class='st'>"2019-01-01"</span>,
               site <span class='op'>=</span> <span class='st'>"YELL"</span>,
               table <span class='op'>=</span> <span class='st'>"countdata"</span>,
               dir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>  comparing hashes against local file index...</span></div><div class='output co'>#&gt; <span class='message'>  updating release manifest...</span></div><div class='input'>
<span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Carl Boettiger, Quinn Thomas, Christine Laney, Claire Lunch.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


