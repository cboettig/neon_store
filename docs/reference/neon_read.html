<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>read in neon tabular data — neon_read • neonstore</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="read in neon tabular data — neon_read" />
<meta property="og:description" content="read in neon tabular data" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neonstore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>read in neon tabular data</h1>
    
    <div class="hidden name"><code>neon_read.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>read in neon tabular data</p>
    </div>

    <pre class="usage"><span class='fu'>neon_read</span><span class='op'>(</span>
  table <span class='op'>=</span> <span class='cn'>NA</span>,
  product <span class='op'>=</span> <span class='cn'>NA</span>,
  site <span class='op'>=</span> <span class='cn'>NA</span>,
  start_date <span class='op'>=</span> <span class='cn'>NA</span>,
  end_date <span class='op'>=</span> <span class='cn'>NA</span>,
  ext <span class='op'>=</span> <span class='cn'>NA</span>,
  timestamp <span class='op'>=</span> <span class='cn'>NA</span>,
  release <span class='op'>=</span> <span class='cn'>NA</span>,
  dir <span class='op'>=</span> <span class='fu'><a href='neon_dir.html'>neon_dir</a></span><span class='op'>(</span><span class='op'>)</span>,
  files <span class='op'>=</span> <span class='cn'>NULL</span>,
  sensor_metadata <span class='op'>=</span> <span class='cn'>TRUE</span>,
  keep_filename <span class='op'>=</span> <span class='cn'>FALSE</span>,
  altrep <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>table</th>
      <td><p>the name of a downloaded NEON table in the store,
see <a href='neon_index.html'>neon_index</a></p></td>
    </tr>
    <tr>
      <th>product</th>
      <td><p>A NEON <code>productCode</code> or list of product codes, see examples.</p></td>
    </tr>
    <tr>
      <th>site</th>
      <td><p>4-letter site code(s) to filter on. Leave as <code>NA</code> to search all.</p></td>
    </tr>
    <tr>
      <th>start_date</th>
      <td><p>Download only files as recent as (<code>YYYY-MM-DD</code>). Leave
as <code>NA</code> to download up to the most recent available data.</p></td>
    </tr>
    <tr>
      <th>end_date</th>
      <td><p>Download only files up to end_date (<code>YYYY-MM-DD</code>). Leave as
<code>NA</code> to download all prior data.</p></td>
    </tr>
    <tr>
      <th>ext</th>
      <td><p>only match files with this file extension(s)</p></td>
    </tr>
    <tr>
      <th>timestamp</th>
      <td><p>only match timestamps prior this. See details in <code><a href='neon_index.html'>neon_index()</a></code>.
Should be a datetime POSIXct object (or coerce-able string)</p></td>
    </tr>
    <tr>
      <th>release</th>
      <td><p>Select only data files associated with a particular release tag,
see <a href='https://www.neonscience.org/data-samples/data-management/data-revisions-releases'>https://www.neonscience.org/data-samples/data-management/data-revisions-releases</a>,
e.g. "RELEASE-2021".  Releases are associated with a specific DOI and the promise that
files associated with a particular release will not change.</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>Location where files should be downloaded. By default will
use the appropriate applications directory for your system
(see <code><a href='https://rdrr.io/r/tools/userdir.html'>tools::R_user_dir()</a></code>).  This default also be configured by
setting the environmental variable <code>NEONSTORE_HOME</code>, see <a href='https://rdrr.io/r/base/Sys.setenv.html'>Sys.setenv</a> or
<a href='https://rdrr.io/r/base/Startup.html'>Renviron</a>.</p></td>
    </tr>
    <tr>
      <th>files</th>
      <td><p>optionally, specify a vector of file paths directly (e.g. as
provided from <a href='neon_index.html'>neon_index</a>) and specify <code>table</code> argument as NULL.</p></td>
    </tr>
    <tr>
      <th>sensor_metadata</th>
      <td><p>logical, default TRUE. Should we add
metadata fields from file names of sensor data into the table?  Adds
DomainID, SiteID, horizontalPosition, verticalPosition, and publicationDate.
Results in slower parsing.</p></td>
    </tr>
    <tr>
      <th>keep_filename</th>
      <td><p>Should we include a column indicating the original
file name for each row?  Can be a useful source of additional metadata that
NEON may omit from the raw files (i.e. <code>siteID</code>), but will also result in
slower parsing.  Default <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>altrep</th>
      <td><p>enable or disable altrep.  Logical, default <code>FALSE</code>. Setting to
<code>TRUE</code> can speed up reading, but may cause <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a> to throw
<code>mapping error: Too many open files</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments to <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a>, can usually be omitted.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>NEON's tabular data files are separated out into separate .csv
files for each site for each month of sampling.  In principle,
each file has identical columns.  <a href='https://vroom.r-lib.org/reference/vroom.html'>vroom::vroom</a> can read in a
data table that has been sharded into many files like this much
much faster than other parsers can read in each table iteratively,
(and thus can greatly out-perform the 'stacking" methods in <code>neonUtilities</code>).</p>
<p>When reading in very large numbers of files, it may be helpful to set
<code>altrep = FALSE</code> to opt out of <code>vroom</code>'s fast altrep mechanism, which
can cause <code>neon_read()</code> to fail when stacking thousands of files.</p>
<p>Unfortunately, not all datasets are entirely consistent in their use
of columns.  <code>neon_read</code> works around this by parsing such tables in
groups of matching schema, which is still reasonably fast.</p>
<p>NEON sensor data products currently do not include important metadata columns
containing DomainID, SiteID, horizontalPosition, verticalPosition, and
publicationDate in the data files themselves, but only encode this in the
in the raw file names. All though these values are shared across a raw
data file, this information is lost when stacking the tables unless explicit
columns are added to the data.  This requires us to parse the files
one-by-one, which is much slower.  By default this information is added to
the table, altering the stacked table schema from that of the raw table.
Disable this behavior by setting <code>sensor_metadata = FALSE</code>.  Future
NEON sensor data products may start including this information in
the raw data files, as is already the case for observational data.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>neon_read</span><span class='op'>(</span><span class='st'>"brd_countdata-expanded"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: number of columns of result is not a multiple of vector length (arg 1)</span></div><div class='output co'>#&gt; <span class='message'>  Some raw data files have changed.</span>
#&gt; <span class='message'>  Using only most updated file to avoid duplicates.</span>
#&gt; <span class='message'>  see ?neonstore::show_deprecated_data() for details.</span></div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 4,654 x 24</span><span>
#&gt;    uid                namedLocation     domainID siteID plotID plotType  pointID
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>             </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> bb46d0cc-0102-449… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> f252dd4d-6684-4e3… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> b2d4cb65-38ec-42a… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> 2882f646-59ce-47f… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> 2aa0d21f-fdc4-496… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> 61d465df-d551-48a… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> ea1ffb98-fceb-486… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> 4d3f6161-26bc-401… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> a93bf746-0df8-462… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> 643c9113-2906-4d1… YELL_009.birdGri… D12      YELL   YELL_… distribu… C3     
#&gt; </span><span style='color: #949494;'># … with 4,644 more rows, and 17 more variables: startDate &lt;dttm&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   eventID &lt;chr&gt;, pointCountMinute &lt;dbl&gt;, targetTaxaPresent &lt;chr&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   taxonID &lt;chr&gt;, scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;, vernacularName &lt;chr&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   family &lt;chr&gt;, nativeStatusCode &lt;chr&gt;, observerDistance &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   detectionMethod &lt;chr&gt;, visualConfirmation &lt;chr&gt;, sexOrAge &lt;chr&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   clusterSize &lt;dbl&gt;, clusterCode &lt;chr&gt;, identifiedBy &lt;chr&gt;</span><span></div><div class='input'>
<span class='co'>## Sensor inputs will add metadata columns by default</span>
<span class='fu'>neon_read</span><span class='op'>(</span><span class='st'>"waq_instantaneous"</span>, site <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"CRAM"</span>,<span class='st'>"SUGG"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: number of columns of result is not a multiple of vector length (arg 1)</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 65,666 x 34</span><span>
#&gt;    startDateTime       endDateTime         sensorDepth sensorDepthExpUncert
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;dttm&gt;</span><span>              </span><span style='color: #949494;font-style: italic;'>&lt;dttm&gt;</span><span>                    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>               
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> 2019-04-28 </span><span style='color: #949494;'>00:00:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:00:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> 2019-04-28 </span><span style='color: #949494;'>00:05:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:05:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> 2019-04-28 </span><span style='color: #949494;'>00:10:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:10:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> 2019-04-28 </span><span style='color: #949494;'>00:15:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:15:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> 2019-04-28 </span><span style='color: #949494;'>00:20:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:20:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> 2019-04-28 </span><span style='color: #949494;'>00:25:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:25:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> 2019-04-28 </span><span style='color: #949494;'>00:30:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:30:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> 2019-04-28 </span><span style='color: #949494;'>00:35:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:35:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> 2019-04-28 </span><span style='color: #949494;'>00:40:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:40:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> 2019-04-28 </span><span style='color: #949494;'>00:45:00</span><span> 2019-04-28 </span><span style='color: #949494;'>00:45:00</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>                  
#&gt; </span><span style='color: #949494;'># … with 65,656 more rows, and 30 more variables: sensorDepthFinalQF &lt;chr&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   specificConductance &lt;dbl&gt;, specificConductanceExpUncert &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   specificCondFinalQF &lt;dbl&gt;, dissolvedOxygen &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   dissolvedOxygenExpUncert &lt;dbl&gt;, dissolvedOxygenFinalQF &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   dissolvedOxygenSaturation &lt;dbl&gt;, dissolvedOxygenSatExpUncert &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   dissolvedOxygenSatFinalQF &lt;dbl&gt;, pH &lt;dbl&gt;, pHExpUncert &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   pHFinalQF &lt;dbl&gt;, chlorophyll &lt;dbl&gt;, chlorophyllExpUncert &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   chlorophyllFinalQF &lt;dbl&gt;, turbidity &lt;dbl&gt;, turbidityExpUncert &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   turbidityFinalQF &lt;dbl&gt;, fDOM &lt;chr&gt;, rawCalibratedfDOM &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   fDOMExpUncert &lt;chr&gt;, fDOMFinalQF &lt;dbl&gt;, buoyNAFlag &lt;dbl&gt;, file &lt;chr&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   domainID &lt;chr&gt;, siteID &lt;chr&gt;, horizontalPosition &lt;chr&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   verticalPosition &lt;chr&gt;, publicationDate &lt;dttm&gt;</span><span></div><div class='input'>

</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Carl Boettiger, Quinn Thomas, Christine Laney, Claire Lunch.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


